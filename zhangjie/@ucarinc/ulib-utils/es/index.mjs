import{Base64 as e}from"js-base64";var o=function(){function o(){}var t=o.prototype;return t.en=function(o,t){if(o){for(var r=t||this.random(),n=e.encode(encodeURIComponent(o)),i=r.length,s=n.length,c="",a=0;s>a;a+=1)c+=String.fromCharCode(n.charCodeAt(a)^r.charCodeAt(a%i));return t?e.encode(c):{str:e.encode(c),key:r}}},t.de=function(o,t){for(var r=e.decode(o),n=t.length,i=r.length,s="",c=0;i>c;c+=1)s+=String.fromCharCode(r.charCodeAt(c)^t.charCodeAt(c%n));return decodeURIComponent(e.decode(s))},t.random=function(e){void 0===e&&(e=6);for(var o="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;e>r;r+=1)o+=t.charAt(Math.floor(62*Math.random()));return o},o}(),t=new o,r=e,n=new o,i=Object.freeze({__proto__:null,crypto:t,base64:r,default:n}),s=new(function(){function e(){}var o=e.prototype;return o.getCookies=function(e){for(var o="",t=document.cookie.split(";"),r=0;t.length>r;r+=1){var i=t[r].trim();if(0===i.indexOf(e+"=")){o=i.substring(e.length+1,i.length);break}}return o?0===o.indexOf("en:/str:")?o=n.de(o.slice(8),e):o:null},o.setCookies=function(e,o,t){var r="",i=o;if(t){var s=new Date;s.setTime(s.getTime()+1e3*t),r="; expires="+s.toUTCString()}"string"!=typeof o&&(i=JSON.stringify(o)),document.cookie=e+"=en:/str:"+n.en(i,e)+r+"; path=/"},o.removeCookies=function(e){var o=new Date,t=this.getCookies(e);o.setTime(o.getTime()-1);var r="; expires="+o.toUTCString();null!==t&&(document.cookie=e+"="+t+r+"; path=/")},e}()),c=Object.freeze({__proto__:null,cookie:s,default:s});function a(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var u,f="sk_W8A_c@";!function(e){e.local="local",e.session="session",e.cookie="cookie"}(u||(u={}));var l=function(){function e(){a(this,"cookieS",new g),a(this,"localS",new v),a(this,"sessionS",new h),a(this,"supportLocalStore",function(){var e=window.sessionStorage;try{return e.setItem("z","0"),e.removeItem("z"),!0}catch(e){return!1}}())}var o=e.prototype;return o.isCookieStorage=function(e){return e&&e instanceof g},o.set=function(e,o,t,r){var i=r||{},s=i.awCookie,c=void 0!==s&&s,a=i.expire,u=void 0===a?0:a,l=i.enctry,g=void 0!==l&&l,v=this.getStorage(t),h={v:o};if(u&&!this.isCookieStorage(v)&&this.supportLocalStore&&(h.e=Date.now()+1e3*u),this.supportLocalStore||this.isCookieStorage(v)){var m=JSON.stringify(h);g&&!this.isCookieStorage(v)&&(m=n.en(m,f)),v.set(e,m)}else{if(!c)return void console.error("该模式下不支持此存储, key:"+e);this.cookieS.set(e,h,{expire:u})}return o},o.get=function(e,o,t){var r,i=t||{},s=i.awCookie,c=void 0!==s&&s,a=i.enctry,u=void 0!==a&&a,l=this.getStorage(o);try{if(this.supportLocalStore||this.isCookieStorage(l))r=l.get(e);else{if(!c)return void console.error("该模式下不支持此存储, key:"+e);r=this.cookieS.get(e)}if(r)return u&&!this.isCookieStorage(l)&&(r=n.de(r,f)),(r=JSON.parse(r)).e&&Date.now()>=r.e?void this.remove(e,o,t):r.v}catch(o){return void console.error("存储失败key:"+e,o)}return r},o.remove=function(e,o,t){var r=this.getStorage(o);return this.supportLocalStore||this.isCookieStorage(r)?(r.remove(e),!0):t&&t.awCookie?(this.cookieS.remove(e),!0):(console.error("该模式下不支持此存储, key:"+e),!1)},o.getStorage=function(e){return e===u.cookie?this.cookieS:e===u.session?this.sessionS:this.localS},e}(),g=function(){function e(){}var o=e.prototype;return o.get=function(e){return s.getCookies(e)},o.set=function(e,o,t){return s.setCookies(e,o,t?t.expire:0)},o.remove=function(e){return s.removeCookies(e)},e}(),v=function(){function e(){}var o=e.prototype;return o.get=function(e){return localStorage.getItem(e)},o.set=function(e,o){localStorage.setItem(e,o)},o.remove=function(e){localStorage.removeItem(e)},e}(),h=function(){function e(){}var o=e.prototype;return o.get=function(e){return sessionStorage.getItem(e)},o.set=function(e,o){sessionStorage.setItem(e,o)},o.remove=function(e){sessionStorage.removeItem(e)},e}(),m=new l;var k=Object.freeze({__proto__:null,get STORE_TYPE(){return u},storageIns:m,getLocal:function(e,o){return m.get(e,u.local,o)},setLocal:function(e,o,t){return m.set(e,o,u.local,t)},removeLocal:function(e,o){m.remove(e,u.local,o)},getSession:function(e,o){return m.get(e,u.session,o)},setSession:function(e,o,t){return m.set(e,o,u.session,t)},removeSession:function(e,o){m.remove(e,u.session,o)},getCookie:function(e,o){return m.get(e,u.cookie,o)},setCookie:function(e,o,t){return m.set(e,o,u.cookie,t)},removeCookie:function(e,o){m.remove(e,u.cookie,o)},default:m});export{c as cookie,i as crypto,k as storage};
